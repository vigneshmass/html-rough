<html>
    <head><title>booking</title>
    
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Bootstrap 4 Horizontal Form Layout</title>

<link rel="stylesheet" href="style3.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    </head>
    <style>
            ::placeholder {
              color:black;
              opacity: 1; /* Firefox */
            }
            
            :-ms-input-placeholder { /* Internet Explorer 10-11 */
             color:black;
            }
            
            ::-ms-input-placeholder { /* Microsoft Edge */
             color:black;
            }
            </style>
    <body>
        <nav class="navbar navbar-expand-md navbar-dark bg-dark mb-3">
            <div class="container">
                <a href="#" class="navbar-brand mr-3"><h2><b><i>TECHIE</i></b></h2></a>
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <div class="navbar-nav">
                        <a href="#" class="nav-item nav-link  active"  > Payment</a>
                        <a href="#" class="nav-item nav-link" onclick="location.href='bookingtable.html';" >Home</a>
                        <a href="#" class="nav-item nav-link"></a>
                        <a href="#" class="nav-item nav-link"></a>
                    </div>
                    <div class="navbar-nav ml-auto">
                    
                         <a href="#" class="nav-item nav-link">  <form class="form-inline">
                    
                                    <a href="#" class="nav-item nav-link" ><h1><b><i class="fa fa-user-circle icon"></i></b></h1></a>
                                </div>
                            </div>
                        </form></a>
                       
                    </div>
                </div>
            </div>    
</nav>

            
<div class="container">
    <div class="row">
        <div class="col-lg-4"></div>
        <div class="col-lg-4">
             <div class="card"> 
            <input type="text" placeholder="Card Owner" id="inputName"><br>
           ChooseBanking: &nbsp;&nbsp;&nbsp;
            
                       <select class="style"  id="inputPay">
                         <option value="Credit Card">Credit Card</option>
                         <option value="Debit Card">Debit Card</option>
                         
                       </select><br>

                       <input type="number" placeholder="Card Number" id="inputNum"><br>
           Expiry-Date:&nbsp;&nbsp;<input type="date" name="Check-in-Date"  id="inputExpiry"class="style" ><br>
                       <input type="number"placeholder="CCV" class="style" id="inputCcv" ><br><br>
                       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="submit"   onclick="handleClick()" id="button"></button>
                       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="button" onclick="location.href='hotels.html';" class="button" value="cancel" id="button" style="top: -20px; padding-right: 20px;" >
       </div></div>
        <div class="col-lg-4"></div>
    </div>        
                
                
 </div> 
 <script type="text/javascript">
    function postData(url = '', data = {}) {
      console.log('We are here');
      // Default options are marked with *
      return fetch(url, {
        method: 'POST', // *GET, POST, PUT, DELETE, etc.
        mode: 'cors', // no-cors, cors, *same-origin
        cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
        credentials: 'same-origin', // include, *same-origin, omit
        headers: {
          'Content-Type': 'application/json',
          // 'Content-Type': 'application/x-www-form-urlencoded',
        },
        redirect: 'follow', // manual, *follow, error
        referrer: 'no-referrer', // no-referrer, *client
        body: JSON.stringify(data), // body data type must match "Content-Type" header
      })
        .then(response => response.json()); // parses JSON response into native Javascript objects 
    }

    function handleClick() {
      console.log('Hi');
      const name = document.getElementById('inputName').value;
      const pay= document.getElementById('inputPay').value;
      const num = document.getElementById('inputNum').value;
      const exp= document.getElementById('inputExpiry').value;
      const numb= document.getElementById('inputCcv').value;
      



      const Data = {
        url: 'http://localhost:8080/api/payments',
        data: {
          'cardOwner': name,
          'creditCard':pay,
          ' cardNum':num,
          'date':exp,
          'ccv':numb

        }
      };
      postData(Data.url, Data.data)
        .then(data => {
          
          if((num.length<=16)  && (numb.length<=3))
          {
           // return true;
          console.log(JSON.stringify(data));
           window.location.href = "success.html";
          }
          else{
            alert("Please enter your 16 digit card number and 3 digit ccv");
         
        
        
          }
         
        })
        .catch(error => console.error(error));
    }        
  </script>   

 

    </body>
</html>